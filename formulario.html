<!DOCTYPE html>
<html lang="es">
	<head>
		<title>OCBP - Aplicaci&oacute;n M&oacute;vil</title>
		<!-- start: META -->
		<meta charset="utf-8" />
		<!--[if IE]><meta http-equiv='X-UA-Compatible' content="IE=edge,IE=9,IE=8,chrome=1" /><![endif]-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta content="" name="description" />
		<meta content="" name="author" />
		<!-- end: META -->
		<!-- start: MAIN CSS -->
		<link href='http://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700,200,100,800' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="assets/plugins/iCheck/skins/all.css">
		<link rel="stylesheet" href="assets/plugins/perfect-scrollbar/src/perfect-scrollbar.css">
		<link rel="stylesheet" href="assets/plugins/animate.css/animate.min.css">
		<!-- end: MAIN CSS -->
		<!-- start: CSS REQUERIDOS FOR SUBVIEW CONTENTS -->
		<link rel="stylesheet" href="assets/plugins/owl-carousel/owl-carousel/owl.carousel.css">
		<link rel="stylesheet" href="assets/plugins/owl-carousel/owl-carousel/owl.theme.css">
		<link rel="stylesheet" href="assets/plugins/owl-carousel/owl-carousel/owl.transitions.css">
		<link rel="stylesheet" href="assets/plugins/summernote/dist/summernote.css">
		<link rel="stylesheet" href="assets/plugins/fullcalendar/fullcalendar/fullcalendar.css">
		<link rel="stylesheet" href="assets/plugins/toastr/toastr.min.css">
		<link rel="stylesheet" href="assets/plugins/bootstrap-select/bootstrap-select.min.css">
		<link rel="stylesheet" href="assets/plugins/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.min.css">
		<link rel="stylesheet" href="assets/plugins/DataTables/media/css/DT_bootstrap.css">
		<link rel="stylesheet" href="assets/plugins/bootstrap-fileupload/bootstrap-fileupload.min.css">
		<link rel="stylesheet" href="assets/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css">
		<!-- end: CSS REQUERIDOS FOR THIS SUBVIEW CONTENTS-->
		<!-- start: CSS REQUERIDOS SOLO PARA ESTA PAGINA -->
		<!-- end: CSS REQUERIDOS SOLO PARA ESTA PAGINA -->
		<!-- start: CORE CSS -->
		<link rel="stylesheet" href="assets/css/styles.css">
		<link rel="stylesheet" href="assets/css/styles-responsive.css">
		<link rel="stylesheet" href="assets/css/plugins.css">
		<link rel="stylesheet" href="assets/css/themes/theme-style3.css" type="text/css" id="skin_color">
		<link rel="stylesheet" href="assets/css/print.css" type="text/css" media="print"/>
		<!-- end: CORE CSS -->
		<link rel="shortcut icon" href="favicon.ico" />
	</head>
	<!-- end: HEAD -->
	<!-- start: BODY -->
	<body class="sidebar-close horizontal-menu-fixed">
		<div class="main-wrapper">
			<!-- start: TOPBAR -->
			<header class="topbar navbar navbar-inverse navbar-fixed-top inner">
				<!-- start: TOPBAR CONTAINER -->
				<div class="container">
					<div class="navbar-header">
						<a class="sb-toggle-left hidden-md hidden-lg" href="#main-navbar">
							<i class="fa fa-bars"></i>
						</a>
						<!-- start: LOGO -->
						<a class="navbar-brand" href="index.html">
							<img src="assets/images/logo.png" alt="Organizacion OCBP"/>
						</a>
						<!-- end: LOGO -->
					</div>
				</div>
				<!-- end: TOPBAR CONTAINER -->
			</header>
			<!-- end: TOPBAR -->
			<!-- start: MAIN CONTAINER -->
			<div class="main-container inner">
				<!-- start: PAGE -->
				<div class="main-content">
					<!-- end: SPANEL CONFIGURATION MODAL FORM -->
					<div class="container">
						<!-- start: PAGE HEADER -->
						<!-- start: TOOLBAR -->
						<div class="toolbar row">
							<div class="col-sm-6 hidden-xs">
								<div class="page-header">
									<h1>App O.C.B.P.<small>Aplicaci&oacute;n de la Clinica Bonadonna Prevenir</small></h1>
								</div>
							</div>
							<div class="col-sm-6 col-xs-12">
								<a href="#" class="back-subviews">
									<i class="fa fa-chevron-left"></i> BACK
								</a>
								<a href="#" class="close-subviews">
									<i class="fa fa-times"></i> CLOSE
								</a>
								<div class="toolbar-tools pull-right">
									<!-- start: TOP NAVIGATION MENU -->
									<ul class="nav navbar-right">
										<!-- start: TO-DO DROPDOWN -->
										<li>
											<a href="index.html">
												<i class="fa fa-home"></i> Inicio
											</a>
										</li>
									</ul>
									<!-- end: TOP NAVIGATION MENU -->
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="panel panel-white">
									<div class="panel-body">
											<div class="row">
												<div class="col-md-12">
													<div id="divFormulario" id="divFormulario" class="well" style="display:none" class="col-md-12">
														<form id="frmPedido" name="frmPedido" method="post" class="form-contributor" action="payu.html">												
															<div id="divPedido" name="divPedido">
															</div>
															<hr>
															<h4>Informaci&oacute;n del <font color="#CC0000"><b>paciente</b></font></h4>
															<div class="form-group">
																<label class="control-label">
																	Tipo Documento <span class="symbol REQUERIDOS">*</span>
																</label>														
																<select id="mnuTipoDoc" name="mnuTipoDoc" class="form-control">
																	<option value="1" selected>C&eacute;dula de Ciudadan&iacute;a</option>
																	<option value="2">C&eacute;dula de Extranjer&iacute;a</option>
																	<option value="3">Tarjeta de Identidad</option>
																</select>
															</div>
															<div class="form-group">
																<label class="control-label">
																	Nro. Documento <span class="symbol REQUERIDOS">*</span>
																</label>														
																<input id="txtDocumento" name="txtDocumento" class="form-control">
															</div>
															<hr>
															<div class="form-group">
																<label class="control-label">
																	Nombre Completo<span class="symbol REQUERIDOS">*</span>
																</label>														
																<input id="txtNombre" name="txtNombre" class="form-control">
															</div>
															<div class="form-group">
																<label class="control-label">
																	Tel&eacute;fono celular<span class="symbol REQUERIDOS">*</span>
																</label>														
																<input id="txtTelefonos" name="txtTelefonos" class="form-control">
															</div>
															<div class="form-group">
																<label class="control-label">
																	Correo Electr&oacute;nico<span class="symbol REQUERIDOS"></span>
																</label>														
																<input id="txtEmail" name="txtEmail" class="form-control">
															</div>														
															<div class="form-group">
																<label class="control-label">
																	Observacion<span class="symbol REQUERIDOS"></span>
																</label>														
																<textarea id="txtObservacion" name="txtObservacion" class="form-control" rows="3" class="ignore" placeholder="Sugiera un horario de atenci&oacute;n para su cita y/o un m&eacute;dico de su preferencia para que le atienda"></textarea>
															</div>	
															<hr>
															<div class="form-group">
																<label class="control-label">
																	C&oacute;mo le notificaremos: <em>(seleccione al menos dos formas)</em> <span class="symbol required"></span>
																</label>
																<div>
																	<div class="checkbox">
																		<label>
																			<input type="checkbox" name="notificacion[]" value="0" class="grey" id="notificacion1" checked>
																			Correo electr&oacute;nico															
																		</label>
																	</div>
																	<div class="checkbox">
																		<label>
																			<input type="checkbox" name="notificacion[]" value="1" class="grey" id="notificacion2">
																			Llamada telef&oacute;nica		
																		</label>
																	</div>
																	<div class="checkbox">
																		<label>
																			<input type="checkbox" name="notificacion[]" value="2" class="grey" id="notificacion3">
																			V&iacute;a Whatsapp
																		</label>
																	</div>
																	<div class="checkbox">
																		<label>
																			<input type="checkbox" name="notificacion[]" value="3" class="grey" id="notificacion4">
																			SMS (Mensaje de texto)
																		</label>
																	</div>
																</div>
															</div>
															<button id="enlReservar" name="enlReservar" class="btn btn-info" type="submit" role="button">
																Efectuar pago <i class="fa fa-check-square-o"></i>
															</button>
															<a id="enlCancelar" name="enlCancelar" class="btn btn-default close-subview-button">
																<i class="fa fa-caret-left"></i> Volver 
															</a><br><br>
															
															<div id="divValidacion" name="divValidacion">
															</div>	
															<div id="divValidacionErr" name="divValidacionErr" class="errorHandler alert alert-danger no-display">
																<i class="fa fa-times-sign"></i> Existen errores en el diligenciamiento. Favor revisar. 
															</div>
															<div id="divValidacionExt" name="divValidacionExt" class="successHandler alert alert-success no-display"> 
																<i class="fa fa-ok"></i> Sus datos han sido registrados exitosamente. Está usted siendo redirigido a realizar el pago...
															</div>	
															<div id="divValidacionErr" name="divValidacionInf" class="errorHandler alert alert-info no-display">
																<i class="fa fa-times-sign"></i> Procesando informacion... 
															</div>														
														</form>													
													</div>
												</div>
											</div>
											<div class="rows">
												<br>
											</div>
									</div>
								</div>
							</div>
						</div>
						<!-- end: PAGE CONTENT-->
					</div>
					<div class="subviews">
						<div class="subviews-container"></div>
					</div>
				</div>
				<!-- end: PAGE -->
			</div>
			<!-- end: MAIN CONTAINER -->
			<!-- start: FOOTER -->
			<footer class="inner">
				<div class="footer-inner">
					<div class="pull-left">
						2017 &copy; Proceneg by Creatividata
					</div>
					<div class="pull-right">
						<span class="go-top"><i class="fa fa-chevron-up"></i></span>
					</div>
				</div>
			</footer>
			<!-- end: FOOTER -->
			
		</div>
		<!-- start: MAIN JAVASCRIPTS -->
		<!--[if lt IE 9]>
		<script src="assets/plugins/respond.min.js"></script>
		<script src="assets/plugins/excanvas.min.js"></script>
		<script type="text/javascript" src="assets/plugins/jQuery/jquery-1.11.1.min.js"></script>
		<![endif]-->
		<!--[if gte IE 9]><!-->
		<script src="assets/plugins/jQuery/jquery-2.1.1.min.js"></script>
		<!--<![endif]-->
		<script src="assets/plugins/jquery-ui/jquery-ui-1.10.2.custom.min.js"></script>
		<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
		<script src="assets/plugins/blockUI/jquery.blockUI.js"></script>
		<script src="assets/plugins/iCheck/jquery.icheck.min.js"></script>
		<script src="assets/plugins/moment/min/moment.min.js"></script>
		<script src="assets/plugins/perfect-scrollbar/src/jquery.mousewheel.js"></script>
		<script src="assets/plugins/perfect-scrollbar/src/perfect-scrollbar.js"></script>
		<script src="assets/plugins/bootbox/bootbox.min.js"></script>
		<script src="assets/plugins/jquery.scrollTo/jquery.scrollTo.min.js"></script>
		<script src="assets/plugins/ScrollToFixed/jquery-scrolltofixed-min.js"></script>
		<script src="assets/plugins/jquery.appear/jquery.appear.js"></script>
		<script src="assets/plugins/jquery-cookie/jquery.cookie.js"></script>
		<script src="assets/plugins/velocity/jquery.velocity.min.js"></script>
		<script src="assets/plugins/TouchSwipe/jquery.touchSwipe.min.js"></script>
		<!-- end: MAIN JAVASCRIPTS -->
		<!-- start: JAVASCRIPTS REQUERIDOS FOR SUBVIEW CONTENTS -->
		<script src="assets/plugins/owl-carousel/owl-carousel/owl.carousel.js"></script>
		<script src="assets/plugins/jquery-mockjax/jquery.mockjax.js"></script>
		<script src="assets/plugins/toastr/toastr.js"></script>
		<script src="assets/plugins/bootstrap-modal/js/bootstrap-modal.js"></script>
		<script src="assets/plugins/bootstrap-modal/js/bootstrap-modalmanager.js"></script>
		<script src="assets/plugins/fullcalendar/fullcalendar/fullcalendar.min.js"></script>
		<script src="assets/plugins/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>
		<script src="assets/plugins/bootstrap-select/bootstrap-select.min.js"></script>
		<script src="assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
		<script src="assets/plugins/bootstrap-fileupload/bootstrap-fileupload.min.js"></script>
		<script src="assets/plugins/DataTables/media/js/jquery.dataTables.min.js"></script>
		<script src="assets/plugins/DataTables/media/js/DT_bootstrap.js"></script>
		<script src="assets/plugins/truncate/jquery.truncate.js"></script>
		<script src="assets/plugins/summernote/dist/summernote.min.js"></script>
		<script src="assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
		<script src="assets/js/subview.js"></script>
		<script src="assets/js/subview-examples.js"></script>
		<!-- end: JAVASCRIPTS REQUERIDOS FOR SUBVIEW CONTENTS -->
		<!-- start: JAVASCRIPTS REQUERIDOS SOLO PARA ESTA PAGINA -->
		<script src="assets/plugins/holder/holder.js"></script>
		<script src="assets/js/form-validation-ped.js"></script>
		<script src="assets/plugins/ckeditor/ckeditor.js"></script>
		<script src="assets/plugins/ckeditor/adapters/jquery.js"></script>
		<!-- end: JAVASCRIPTS REQUERIDOS SOLO PARA ESTA PAGINA -->
		<script src="assets/js/main.js"></script>
		<!-- <script language="javascript" src="assets/js/jquery.js"></script> -->
		<script language="javascript">
			jQuery(document).ready(function() {
				Main.init();

				$("#divFormulario").show();
				$("#divPedido").html("Cargando...");
				$.ajax({url: "http://www.creatividata.com/www/ocbp.mov/ws/lstCtgServicios.php?cat=S-"+ getUrlParameter('serv'), 
						success: function(result){
							$("#divPedido").html(result);
						},
						error: function(jqXHR, textStatus, errorThrown) {
							$("#divPedido").html("Error detectado: " + textStatus + "\nExcepcion: " + errorThrown);
						}						
				});	

				$(document).on("click","#enlCancelar",function(event) {					
					window.history.back();
				});	
				
				$('#frmPedido').validate({
					ignore: ".ignore",
					rules: {	//mnuTipoDoc: { required: true },
								txtDocumento: { required: true, minlength: 7, maxlength: 12, number: true},
								txtNombre: { required: true, minlength: 2, maxlength: 150},
								txtTelefonos: { required:true, minlength: 10, maxlength: 10, number: true},
								txtEmail: { required: true, minlength: 2, email: true},
								txtObservacion: { required: false}
							},
					messages: {
								//mnuTipoDoc: "Debe seleccionar el tipo de documento",
								txtDocumento: "Debe escribir un numero valido de documento: Minimo 7 digitos, maximo 12.",
								txtNombre : "Diligencie su nombre completo.",
								txtTelefonos : "El número de celular no es correcto. Debe tener 10 digitos.",
								txtEmail : "Debe introducir un email valido.",
								txtObservacion : "Escriba un mensaje valido."
							},
					invalidHandler: function (event, validator) { //display error alert on form submit
						var errors = validator.numberOfInvalids();
						if (errors) {							
							$("#divValidacionExt").hide();
							$("#divValidacionErr").show();
						}
					},
					highlight: function (element) {
						$(element).closest('.help-block').removeClass('valid');
						// display OK icon
						$(element).closest('.form-group').removeClass('has-success').addClass('has-error').find('.symbol').removeClass('ok').addClass('required');
						// add the Bootstrap error class to the control group
					},
					unhighlight: function (element) { // revert the change done by hightlight
						$(element).closest('.form-group').removeClass('has-error');
						// set error class to the control group
					},
					success: function (label, element) {
						label.addClass('help-block valid');
						// mark the current input as valid and display OK icon
						$(element).closest('.form-group').removeClass('has-error').addClass('has-success').find('.symbol').removeClass('required').addClass('ok');
					},
					submitHandler: function(form) {
						$("#divValidacionErr").hide();
						$("#divValidacionInf").show();
						$.ajax({
							url: "http://www.creatividata.com/www/ocbp.mov/ws/lstCtgServicios.php?cat=P-1", 
							type: "POST",    
							data: $("#frmPedido").serialize(),
							cache: false,             
							processData: false,      
							success: function(data) {
								var arr = data.split('&');
								window.location.href = "http://www.creatividata.com/www/ocbp.mov/ws/envTrmTrx.php?cbp="+arr[0];
							},
							error: function(jqXHR, textStatus, errorThrown) {
								alert("Data: "+data+"; Error detectado: " + textStatus + "\nExcepcion: " + errorThrown);
							}
						});
						return false;
					}
				});	
				
				function getUrlParameter(name) {
					name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
					var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
					var results = regex.exec(location.search);
					return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
				}; 
			});
		</script>

	</body>
	<!-- end: BODY -->
</html>



